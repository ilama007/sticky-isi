{"version":3,"file":"index.js","sources":["../src/index.js"],"sourcesContent":["import React, { Component } from 'react';\nimport { Portal } from 'react-portal';\nimport PropTypes from 'prop-types';\n\n/**\n * Credit: https://www.npmjs.com/package/react-sticky-footer\n * Modified little to custom fit ISI styles, accept footer reference\n * Added dependency: react-portal\n */\nexport default class StickyISI extends Component {\n  observer;\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isAtBottom: false\n    };\n  }\n\n  componentDidMount() {\n    this.observer = new MutationObserver((mutations) => {\n      this.determineState();\n    });\n    this.observer.observe(document.body, {\n      childList: true,\n      subtree: true,\n      attributes: true\n    });\n    window.addEventListener('scroll', this.handleScroll);\n    this.determineState();\n  }\n\n  componentWillUnmount() {\n    this.observer.disconnect();\n    window.removeEventListener('scroll', this.handleScroll);\n  }\n\n  render() {\n    let fixedStyles = {\n      ...this.props.stickyStyles,\n      position: 'fixed',\n      bottom: 0\n    };\n    return (\n      <div>\n        <div style={this.props.normalStyles} id='normal-chappy-isi'>\n          {this.props.children}\n        </div>\n        {!this.state.isAtBottom && (\n          <Portal>\n            <div style={fixedStyles}>{this.props.children}</div>\n          </Portal>\n        )}\n      </div>\n    );\n  }\n\n  determineState = () => {\n    const scrollOffset = window.pageYOffset + window.innerHeight;\n    const contentHeight =\n      document.body.clientHeight -\n      (this.props.footerRef.offsetHeight +\n        document.getElementById('normal-chappy-isi').offsetHeight -\n        this.props.stickyHeight);\n\n    if (!this.state.isAtBottom && scrollOffset >= contentHeight) {\n      this.setState({ isAtBottom: true });\n      this.props.onFooterStateChange && this.props.onFooterStateChange(true);\n    } else if (\n      this.state.isAtBottom &&\n      scrollOffset < contentHeight - contentHeight * this.props.stickAtThreshold\n    ) {\n      this.setState({ isAtBottom: false });\n      this.props.onFooterStateChange && this.props.onFooterStateChange(false);\n    }\n  };\n\n  handleScroll = () => {\n    this.determineState();\n  };\n}\n\nStickyISI.propTypes = {\n  /**\n   * Element reference to footer\n   */\n  footerRef: PropTypes.node,\n  /**\n   * Height of the sticky on the screen(normally fixed)\n   */\n  stickyHeight: PropTypes.number,\n  /**\n   * A value that tells the component how much the user should scroll back up before the sticky footer shows up again.\n   * The default is 0.001. A number greater than the default would require the user scroll up more before the\n   * sticky footer shows up.\n   */\n  stickAtThreshold: PropTypes.number,\n  /**\n   * Styles to be applied to the sticky footer only.\n   */\n  stickyStyles: PropTypes.object,\n  /**\n   * Styles to be applied to the footer in its standard location only.\n   */\n  normalStyles: PropTypes.object,\n  /**\n   * Callback that informs when the state of the footer has changed from sticky to being in normal document flow, via boolean argument.\n   * true means it is in normal flow, false means it is sticky.\n   */\n  onFooterStateChange: PropTypes.func\n};\n\nStickyISI.defaultProps = {\n  stickyHeight: 150,\n  stickAtThreshold: 0.001,\n  stickyStyles: {},\n  normalStyles: {}\n};\n"],"names":["StickyISI","props","determineState","scrollOffset","window","pageYOffset","innerHeight","contentHeight","document","body","clientHeight","footerRef","offsetHeight","getElementById","stickyHeight","state","isAtBottom","setState","onFooterStateChange","stickAtThreshold","handleScroll","componentDidMount","observer","MutationObserver","mutations","observe","childList","subtree","attributes","addEventListener","componentWillUnmount","disconnect","removeEventListener","render","fixedStyles","stickyStyles","position","bottom","React","normalStyles","children","Portal","Component","propTypes","PropTypes","node","number","object","func","defaultProps"],"mappings":"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"}