{"version":3,"file":"index.js","sources":["../src/index.js"],"sourcesContent":["import React, { Component } from 'react';\nimport { Portal } from 'react-portal';\nimport PropTypes from 'prop-types';\n\n/**\n * Credit: https://www.npmjs.com/package/react-sticky-footer\n * Modified little to custom fit ISI styles, accept footer reference\n * Added dependency: react-portal\n */\nexport default class StickyISI extends Component {\n  observer;\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isAtBottom: false\n    };\n  }\n\n  componentDidMount() {\n    this.observer = new MutationObserver((mutations) => {\n      this.determineState();\n    });\n    this.observer.observe(document.body, {\n      childList: true,\n      subtree: true,\n      attributes: true\n    });\n    window.addEventListener('scroll', this.handleScroll);\n    this.determineState();\n  }\n\n  componentWillUnmount() {\n    this.observer.disconnect();\n    window.removeEventListener('scroll', this.handleScroll);\n  }\n\n  render() {\n    let fixedStyles = {\n      ...this.props.stickyStyles,\n      position: 'fixed',\n      bottom: 0\n    };\n    return (\n      <div>\n        <div\n          className={this.props.className}\n          style={this.props.normalStyles}\n          id='normal-chappy-isi'\n        >\n          {this.props.children}\n        </div>\n        {!this.state.isAtBottom && (\n          <Portal>\n            <div className={this.props.className} style={fixedStyles}>\n              {this.props.children}\n            </div>\n          </Portal>\n        )}\n      </div>\n    );\n  }\n\n  determineState = () => {\n    const scrollOffset = window.pageYOffset + window.innerHeight;\n    const contentHeight =\n      document.body.clientHeight -\n      (this.props.footerRef.offsetHeight +\n        document.getElementById('normal-chappy-isi').offsetHeight -\n        this.props.stickyHeight);\n\n    if (!this.state.isAtBottom && scrollOffset >= contentHeight) {\n      this.setState({ isAtBottom: true });\n      this.props.onFooterStateChange && this.props.onFooterStateChange(true);\n    } else if (\n      this.state.isAtBottom &&\n      scrollOffset < contentHeight - contentHeight * this.props.stickAtThreshold\n    ) {\n      this.setState({ isAtBottom: false });\n      this.props.onFooterStateChange && this.props.onFooterStateChange(false);\n    }\n  };\n\n  handleScroll = () => {\n    this.determineState();\n  };\n}\n\nStickyISI.propTypes = {\n  /**\n   * Element reference to footer\n   */\n  // eslint-disable-next-line no-undef\n  footerRef: PropTypes.instanceOf(Element),\n  /**\n   * Height of the sticky on the screen(normally fixed)\n   */\n  stickyHeight: PropTypes.number,\n  /**\n   * A value that tells the component how much the user should scroll back up before the sticky footer shows up again.\n   * The default is 0.001. A number greater than the default would require the user scroll up more before the\n   * sticky footer shows up.\n   */\n  stickAtThreshold: PropTypes.number,\n  /**\n   * Styles to be applied to the sticky footer only.\n   */\n  stickyStyles: PropTypes.object,\n  /**\n   * Styles to be applied to the footer in its standard location only.\n   */\n  normalStyles: PropTypes.object,\n  /**\n   * Callback that informs when the state of the footer has changed from sticky to being in normal document flow, via boolean argument.\n   * true means it is in normal flow, false means it is sticky.\n   */\n  onFooterStateChange: PropTypes.func,\n  /** Common class name for both sticky and normal ISI. normalStyles and stickyStyles override the class styles */\n  className: PropTypes.string\n};\n\nStickyISI.defaultProps = {\n  stickyHeight: 150,\n  stickAtThreshold: 0.001,\n  stickyStyles: {},\n  normalStyles: {}\n};\n"],"names":["StickyISI","props","determineState","scrollOffset","window","pageYOffset","innerHeight","contentHeight","document","body","clientHeight","footerRef","offsetHeight","getElementById","stickyHeight","state","isAtBottom","setState","onFooterStateChange","stickAtThreshold","handleScroll","componentDidMount","observer","MutationObserver","mutations","observe","childList","subtree","attributes","addEventListener","componentWillUnmount","disconnect","removeEventListener","render","fixedStyles","stickyStyles","position","bottom","React","className","normalStyles","children","Portal","Component","propTypes","PropTypes","instanceOf","Element","number","object","func","string","defaultProps"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IASqBA;;;AAGnB,qBAAYC,KAAZ,EAAmB;AAAA;;AACjB,kCAAMA,KAAN;;AADiB,UAmDnBC,cAnDmB,GAmDF,YAAM;AACrB,UAAMC,YAAY,GAAGC,MAAM,CAACC,WAAP,GAAqBD,MAAM,CAACE,WAAjD;;AACA,UAAMC,aAAa,GACjBC,QAAQ,CAACC,IAAT,CAAcC,YAAd,IACC,MAAKT,KAAL,CAAWU,SAAX,CAAqBC,YAArB,GACCJ,QAAQ,CAACK,cAAT,CAAwB,mBAAxB,EAA6CD,YAD9C,GAEC,MAAKX,KAAL,CAAWa,YAHb,CADF;;AAMA,UAAI,CAAC,MAAKC,KAAL,CAAWC,UAAZ,IAA0Bb,YAAY,IAAII,aAA9C,EAA6D;AAC3D,cAAKU,QAAL,CAAc;AAAED,UAAAA,UAAU,EAAE;AAAd,SAAd;;AACA,cAAKf,KAAL,CAAWiB,mBAAX,IAAkC,MAAKjB,KAAL,CAAWiB,mBAAX,CAA+B,IAA/B,CAAlC;AACD,OAHD,MAGO,IACL,MAAKH,KAAL,CAAWC,UAAX,IACAb,YAAY,GAAGI,aAAa,GAAGA,aAAa,GAAG,MAAKN,KAAL,CAAWkB,gBAFrD,EAGL;AACA,cAAKF,QAAL,CAAc;AAAED,UAAAA,UAAU,EAAE;AAAd,SAAd;;AACA,cAAKf,KAAL,CAAWiB,mBAAX,IAAkC,MAAKjB,KAAL,CAAWiB,mBAAX,CAA+B,KAA/B,CAAlC;AACD;AACF,KArEkB;;AAAA,UAuEnBE,YAvEmB,GAuEJ,YAAM;AACnB,YAAKlB,cAAL;AACD,KAzEkB;;AAEjB,UAAKa,KAAL,GAAa;AACXC,MAAAA,UAAU,EAAE;AADD,KAAb;AAFiB;AAKlB;;;;SAEDK,oBAAA,6BAAoB;AAAA;;AAClB,SAAKC,QAAL,GAAgB,IAAIC,gBAAJ,CAAqB,UAACC,SAAD,EAAe;AAClD,MAAA,MAAI,CAACtB,cAAL;AACD,KAFe,CAAhB;AAGA,SAAKoB,QAAL,CAAcG,OAAd,CAAsBjB,QAAQ,CAACC,IAA/B,EAAqC;AACnCiB,MAAAA,SAAS,EAAE,IADwB;AAEnCC,MAAAA,OAAO,EAAE,IAF0B;AAGnCC,MAAAA,UAAU,EAAE;AAHuB,KAArC;AAKAxB,IAAAA,MAAM,CAACyB,gBAAP,CAAwB,QAAxB,EAAkC,KAAKT,YAAvC;AACA,SAAKlB,cAAL;AACD;;SAED4B,uBAAA,gCAAuB;AACrB,SAAKR,QAAL,CAAcS,UAAd;AACA3B,IAAAA,MAAM,CAAC4B,mBAAP,CAA2B,QAA3B,EAAqC,KAAKZ,YAA1C;AACD;;SAEDa,SAAA,kBAAS;AACP,QAAIC,WAAW,yBACV,KAAKjC,KAAL,CAAWkC,YADD;AAEbC,MAAAA,QAAQ,EAAE,OAFG;AAGbC,MAAAA,MAAM,EAAE;AAHK,MAAf;;AAKA,wBACEC,uDACEA;AACE,MAAA,SAAS,EAAE,KAAKrC,KAAL,CAAWsC,SADxB;AAEE,MAAA,KAAK,EAAE,KAAKtC,KAAL,CAAWuC,YAFpB;AAGE,MAAA,EAAE,EAAC;AAHL,OAKG,KAAKvC,KAAL,CAAWwC,QALd,CADF,EAQG,CAAC,KAAK1B,KAAL,CAAWC,UAAZ,iBACCsB,6BAACI,kBAAD,qBACEJ;AAAK,MAAA,SAAS,EAAE,KAAKrC,KAAL,CAAWsC,SAA3B;AAAsC,MAAA,KAAK,EAAEL;AAA7C,OACG,KAAKjC,KAAL,CAAWwC,QADd,CADF,CATJ,CADF;AAkBD;;;EApDoCE;AA+EvC3C,SAAS,CAAC4C,SAAV,GAAsB;AAKpBjC,EAAAA,SAAS,EAAEkC,SAAS,CAACC,UAAV,CAAqBC,OAArB,CALS;AASpBjC,EAAAA,YAAY,EAAE+B,SAAS,CAACG,MATJ;AAepB7B,EAAAA,gBAAgB,EAAE0B,SAAS,CAACG,MAfR;AAmBpBb,EAAAA,YAAY,EAAEU,SAAS,CAACI,MAnBJ;AAuBpBT,EAAAA,YAAY,EAAEK,SAAS,CAACI,MAvBJ;AA4BpB/B,EAAAA,mBAAmB,EAAE2B,SAAS,CAACK,IA5BX;AA8BpBX,EAAAA,SAAS,EAAEM,SAAS,CAACM;AA9BD,CAAtB;AAiCAnD,SAAS,CAACoD,YAAV,GAAyB;AACvBtC,EAAAA,YAAY,EAAE,GADS;AAEvBK,EAAAA,gBAAgB,EAAE,KAFK;AAGvBgB,EAAAA,YAAY,EAAE,EAHS;AAIvBK,EAAAA,YAAY,EAAE;AAJS,CAAzB;;;;"}