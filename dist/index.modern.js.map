{"version":3,"file":"index.modern.js","sources":["../src/index.js"],"sourcesContent":["import React, { Component } from 'react';\nimport { Portal } from 'react-portal';\nimport PropTypes from 'prop-types';\n\n/**\n * Credit: https://www.npmjs.com/package/react-sticky-footer\n * Modified little to custom fit ISI styles, accept footer reference\n * Added dependency: react-portal\n */\nexport default class StickyISI extends Component {\n  observer;\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isAtBottom: false\n    };\n  }\n\n  componentDidMount() {\n    this.observer = new MutationObserver((mutations) => {\n      this.determineState();\n    });\n    this.observer.observe(document.body, {\n      childList: true,\n      subtree: true,\n      attributes: true\n    });\n    window.addEventListener('scroll', this.handleScroll);\n    this.determineState();\n  }\n\n  componentWillUnmount() {\n    this.observer.disconnect();\n    window.removeEventListener('scroll', this.handleScroll);\n  }\n\n  render() {\n    let fixedStyles = {\n      ...this.props.stickyStyles,\n      position: 'fixed',\n      bottom: 0\n    };\n    return (\n      <div>\n        <div\n          className={this.props.className}\n          style={this.props.normalStyles}\n          id='normal-chappy-isi'\n        >\n          {this.props.children}\n        </div>\n        {!this.state.isAtBottom && (\n          <Portal>\n            <div className={this.props.className} style={fixedStyles}>\n              {this.props.children}\n            </div>\n          </Portal>\n        )}\n      </div>\n    );\n  }\n\n  determineState = () => {\n    const scrollOffset = window.pageYOffset + window.innerHeight;\n    const contentHeight =\n      document.body.clientHeight -\n      (this.props.footerRef.offsetHeight +\n        document.getElementById('normal-chappy-isi').offsetHeight -\n        this.props.stickyHeight);\n\n    if (!this.state.isAtBottom && scrollOffset >= contentHeight) {\n      this.setState({ isAtBottom: true });\n      this.props.onFooterStateChange && this.props.onFooterStateChange(true);\n    } else if (\n      this.state.isAtBottom &&\n      scrollOffset < contentHeight - contentHeight * this.props.stickAtThreshold\n    ) {\n      this.setState({ isAtBottom: false });\n      this.props.onFooterStateChange && this.props.onFooterStateChange(false);\n    }\n  };\n\n  handleScroll = () => {\n    this.determineState();\n  };\n}\n\nStickyISI.propTypes = {\n  /**\n   * Element reference to footer\n   */\n  // eslint-disable-next-line no-undef\n  footerRef: PropTypes.instanceOf(Element),\n  /**\n   * Height of the sticky on the screen(normally fixed)\n   */\n  stickyHeight: PropTypes.number,\n  /**\n   * A value that tells the component how much the user should scroll back up before the sticky footer shows up again.\n   * The default is 0.001. A number greater than the default would require the user scroll up more before the\n   * sticky footer shows up.\n   */\n  stickAtThreshold: PropTypes.number,\n  /**\n   * Styles to be applied to the sticky footer only.\n   */\n  stickyStyles: PropTypes.object,\n  /**\n   * Styles to be applied to the footer in its standard location only.\n   */\n  normalStyles: PropTypes.object,\n  /**\n   * Callback that informs when the state of the footer has changed from sticky to being in normal document flow, via boolean argument.\n   * true means it is in normal flow, false means it is sticky.\n   */\n  onFooterStateChange: PropTypes.func,\n  /** Common class name for both sticky and normal ISI. normalStyles and stickyStyles override the class styles */\n  className: PropTypes.string\n};\n\nStickyISI.defaultProps = {\n  stickyHeight: 150,\n  stickAtThreshold: 0.001,\n  stickyStyles: {},\n  normalStyles: {}\n};\n"],"names":["StickyISI","Component","constructor","props","determineState","scrollOffset","window","pageYOffset","innerHeight","contentHeight","document","body","clientHeight","footerRef","offsetHeight","getElementById","stickyHeight","state","isAtBottom","setState","onFooterStateChange","stickAtThreshold","handleScroll","componentDidMount","observer","MutationObserver","mutations","observe","childList","subtree","attributes","addEventListener","componentWillUnmount","disconnect","removeEventListener","render","fixedStyles","stickyStyles","position","bottom","className","normalStyles","children","propTypes","PropTypes","instanceOf","Element","number","object","func","string","defaultProps"],"mappings":"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"}